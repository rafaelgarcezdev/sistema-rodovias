import{r as s,o as V,a as l,c as M,w as T,b as f,d as o,e as B,f as r,v as b,g,h as i,i as y,F,t as x,j as R,W as S}from"./app-cc6c6a67.js";import{M as C}from"./MainLayout-558da333.js";const D={class:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md"},q={class:"mb-4"},E={class:"mb-4"},I=["value"],N={class:"mb-4"},K=["value"],L={class:"mb-4"},P={class:"grid grid-cols-2 gap-4"},W={key:0,class:"mt-4 text-green-600 text-center"},H={__name:"Create",setup(j){const u=s(""),n=s(""),v=s(""),p=s(""),m=s(""),c=s(""),d=s(""),w=s([]),k=s([]);V(async()=>{try{const[t,e]=await Promise.all([f.get("api/ufs"),f.get("api/rodovias"),f.get("api/trechos")]);console.log(t.data),w.value=t.data,k.value=e.data}catch(t){console.error("Erro ao carregar dados:",t)}});const U=async()=>{var t,e;if(!u.value||!n.value||!v.value||!p.value||!m.value||!c.value){d.value="Por favor, preencha todos os campos.";return}try{await f.post("/api/trechos",{data_referencia:u.value,uf_id:parseInt(n.value),rodovia_id:parseInt(v.value),tipo:p.value,quilometragem_inicial:parseFloat(m.value).toFixed(3),quilometragem_final:parseFloat(c.value).toFixed(3)}),d.value="Trecho cadastrado com sucesso!",S.push("/api/trechos")}catch(a){console.error("Erro ao cadastrar:",a),d.value=((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.error)||"Erro ao cadastrar o trecho."}};return(t,e)=>(l(),M(C,null,{default:T(()=>[o("div",D,[e[16]||(e[16]=o("h2",{class:"text-xl mb-4 text-center"},"Cadastrar Novo Trecho",-1)),o("form",{onSubmit:B(U,["prevent"])},[o("div",q,[e[6]||(e[6]=o("label",{for:"dataReferencia",class:"block text-sm"},"Data de Referência:",-1)),r(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),type:"date",id:"dataReferencia",class:"border p-2 w-full rounded"},null,512),[[b,u.value]])]),o("div",E,[e[8]||(e[8]=o("label",{for:"suf",class:"block text-sm"},"Unidade da Federação:",-1)),r(o("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),id:"suf",class:"border p-2 w-full rounded"},[e[7]||(e[7]=o("option",{value:""},"Selecione",-1)),(l(!0),i(F,null,y(w.value,a=>(l(),i("option",{key:a.id,value:a.id},x(a.sigla),9,I))),128))],512),[[g,n.value]])]),o("div",N,[e[10]||(e[10]=o("label",{for:"sbr",class:"block text-sm"},"Rodovia:",-1)),r(o("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>v.value=a),id:"sbr",class:"border p-2 w-full rounded"},[e[9]||(e[9]=o("option",{value:""},"Selecione",-1)),(l(!0),i(F,null,y(k.value,a=>(l(),i("option",{key:a.id,value:a.id},x(a.codigo),9,K))),128))],512),[[g,v.value]])]),o("div",L,[e[12]||(e[12]=o("label",{for:"stipo",class:"block text-sm"},"Tipo de Trecho:",-1)),r(o("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>p.value=a),id:"stipo",class:"border p-2 w-full rounded"},e[11]||(e[11]=[o("option",{value:""},"Selecione",-1),o("option",{value:"B"},"B",-1)]),512),[[g,p.value]])]),o("div",P,[o("div",null,[e[13]||(e[13]=o("label",{for:"skmi",class:"block text-sm"},"Km Inicial:",-1)),r(o("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>m.value=a),type:"number",step:"0.001",id:"skmi",class:"border p-2 w-full rounded"},null,512),[[b,m.value]])]),o("div",null,[e[14]||(e[14]=o("label",{for:"skmf",class:"block text-sm"},"Km Final:",-1)),r(o("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>c.value=a),type:"number",step:"0.001",id:"skmf",class:"border p-2 w-full rounded"},null,512),[[b,c.value]])])]),e[15]||(e[15]=o("button",{type:"submit",class:"bg-blue-600 text-white p-2 rounded w-full mt-4"}," Cadastrar ",-1))],32),d.value?(l(),i("div",W,x(d.value),1)):R("",!0)])]),_:1}))}};export{H as default};
